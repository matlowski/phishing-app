{% extends "ml/main.html" %}

{% block content %}
    <style>
        #drop-zone {
            width: 450px;   
            height: 225px;  
            border: 3px dashed #aaa;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 20px auto;
            color: #555;
            font-size: 18px; 
            cursor: pointer;
}

        #drop-zone.dragover {
            border-color: #333;
            background-color: #f0f0f0;
            color: #000;
        }
    </style>

    <br>
    <br>
    <br>
    <div style="text-align: center; margin-top: 20px;">
    <h2>Don’t be a fish.</h2>
    <h2>Verify your .eml file!</h2>
    <i class="fa fa-arrow-down fa-10x" aria-hidden="true"></i>
    </div>

    <form enctype="multipart/form-data" method="post" action="">
        {% csrf_token %}

        <!-- Strefa drag & drop -->
        <div id="drop-zone">
            Drag a file here or click to select
        </div>

        <!-- Ukryte pole input dla pliku -->
        <input type="file" id="file-input" name="file" style="display:none;">

        <!-- Przycisk do wysłania -->
        <div style="text-align: center; margin-top: 10px;">
            <button type="submit" class="btn btn-primary">Upload file</button>
        </div>
    </form>


    <script>
        const dropZone = document.getElementById('drop-zone');
        const fileInput = document.getElementById('file-input');

        // Kliknięcie w drop zone - otwiera okno wyboru pliku
        dropZone.addEventListener('click', () => {
            fileInput.click();
        });

        // Drag & Drop - przeciąganie pliku nad drop zone
        dropZone.addEventListener('dragover', (e) => {
            e.preventDefault();
            dropZone.classList.add('dragover');
        });

        dropZone.addEventListener('dragleave', (e) => {
            e.preventDefault();
            dropZone.classList.remove('dragover');
        });

        // Upuszczenie pliku na drop zone
        dropZone.addEventListener('drop', (e) => {
            e.preventDefault();
            dropZone.classList.remove('dragover');

            const files = e.dataTransfer.files;
            if (files.length) {
                fileInput.files = files;

                // Możesz wyświetlić nazwę pliku w drop zone
                dropZone.textContent = files[0].name;
            }
        });

        // Gdy użytkownik wybierze plik przez input
        fileInput.addEventListener('change', () => {
            if (fileInput.files.length) {
                dropZone.textContent = fileInput.files[0].name;
            } else {
                dropZone.textContent = 'Przeciągnij tutaj plik lub kliknij, aby wybrać';
            }
        });
    </script>
{% endblock %}
